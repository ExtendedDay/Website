<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta name="darkreader-lock" />
    <title>
        Extended Day Website
    </title>
    <link href="../style.css" rel="stylesheet" />
    <link href="../Fonts/boxicons-2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="imagesloaded.pkgd.min.js"></script>
    <script src="masonry.pkgd.min.js"></script>
</head>
<body>
    <header class="gallery-header">
        <img alt="" role="presentation" src="../Images/TreeBranchRightLeft.png" />
        <h1 class="gallery-title">
            Gallery
        </h1>
    </header>
    <main>
        <div class="gallery-intro-container">
            <h2 class="gallery-subtitle">
                Welcome To our Gallery!
            </h2>
            <p>
                We will be taking photos of your children's day throughout the summer as they go on our various trips or as they participate in various activities. Please check back often to see new pictures!
                <!-- For allergy concerns please contact Cal Ivy <a href="http://https://calivyprep.org/contact-us/" target="_blank" rel="noopener noreferrer">here.</a> -->
            </p>
        </div>
        <div class="gallery-container">
            <div class="masonry-gallery">
                <img alt="" class="gallery-item" src="Images/100-300x150.webp" />
                <img alt="" class="gallery-item" src="Images/1003-300x400.webp" />
                <img alt="" class="gallery-item" src="Images/103-400x300.webp" />
                <img alt="" class="gallery-item" src="Images/13-400x300.webp" />
                <img alt="" class="gallery-item" src="Images/161-300x150.webp" />
                <img alt="" class="gallery-item" src="Images/23-300x400.webp" />
                <img alt="" class="gallery-item" src="Images/43-300x380.webp" />
                <img alt="" class="gallery-item" src="Images/54-300x280.webp" />
                <img alt="" class="gallery-item" src="Images/56-400x300.webp" />
                <img alt="" class="gallery-item" src="Images/61-300x280.webp" />
                <img alt="" class="gallery-item" src="Images/72-300x200.webp" />
                <img alt="" class="gallery-item" src="Images/76-300x150.webp" />
                <img alt="" class="gallery-item" src="Images/783-300x300.webp" />
                <img alt="" class="gallery-item" src="Images/829-300x280.webp" />
                <img alt="" class="gallery-item" src="Images/90-300x200.webp" />
            </div>
        </div>
        <div id="myModal" class="modal">
            <div class="bx bx-left-arrow left-arrow"></div>
            <div class="modal-content">
                <div class="bx bx-x-circle close"></div>
                <img id="modal-image" alt="Modal Image" />
            </div>
            <div class="bx bx-right-arrow right-arrow"></div>
        </div>
    </main>
    <footer>
        <nav class="navigation">
            <ul class="navbar" role="tree">
                <li role="none">
                    <a href="../index.html" role="treeitem">
                        <div class="nav-icon bx bxs-home">
                        </div>
                        <p>
                            Home
                        </p>
                    </a>
                </li>
                <li role="none">
                    <a href="../Events/Events.html" role="treeitem">
                        <div class="nav-icon bx bxs-calendar">
                        </div>
                        <p>
                            Trips
                        </p>
                    </a>
                </li>
                <li role="none">
                    <a aria-current="page" href="Gallery.html" role="treeitem">
                        <div class="nav-icon bx bxs-photo-album">
                        </div>
                        <p>
                            Gallery
                        </p>
                    </a>
                </li>
                <li role="none">
                    <a href="../Menu/Menu.html" role="treeitem">
                        <div class="nav-icon bx bxs-dish">
                        </div>
                        <p>
                            Menu
                        </p>
                    </a>
                </li>
                <li role="none">
                    <a href="../Crew/Crew.html" role="treeitem">
                        <div class="nav-icon bx bxs-id-card">
                        </div>
                        <p>
                            About
                        </p>
                    </a>
                </li>
            </ul>
        </nav>
    </footer>
    <script>
        $(document).ready(function () {
            var $elem = $('.masonry-gallery');
            var msnry = new Masonry($elem[0], {
                itemSelector: '.gallery-item',
                columnWidth: '.gallery-item',
                percentPosition: true,
                gutter: 10,
                fitWidth: true,
                initLayout: false
            });
    
            $elem.imagesLoaded().progress(function () {
                msnry.layout();
            });
    
            // Debounce function to limit the rate of layout recalculations
            function debounce(func, wait) {
                var timeout;
                return function () {
                    clearTimeout(timeout);
                    timeout = setTimeout(func, wait);
                };
            }
    
            // Layout recalculation
            var relayoutMasonry = debounce(function () {
                msnry.layout();
            }, 100);
    
            // Trigger layout on window resize
            $(window).resize(function () {
                relayoutMasonry();
            });
    
            // Trigger layout on orientation change
            $(window).on('orientationchange', function () {
                setTimeout(function () {
                    relayoutMasonry();
                }, 500); // Delay to ensure orientation change is fully processed
            });
    
            // Initial layout after all images have loaded
            $elem.imagesLoaded().done(function () {
                msnry.layout();
            });
        });
    </script>
    
    
    <script>
        const navbar = document.querySelector('.navigation');
        const body = document.querySelector('.masonry-gallery');
        var navgap = navbar.offsetHeight + 20;
        body.style.paddingBottom += navgap + 'px';
    </script>
    <script>
        $(document).ready(function () {
            // Open modal when an image is clicked
            $(document).on('click', '.gallery-item', function () {
                var modal = $('#myModal');
                var modalImg = $('#modal-image');
                var images = $('.gallery-item');
                var currentIndex = $(this).index();

                // Set the current image in the modal
                modalImg.attr('src', $(this).attr('src'));

                // Show modal
                modal.css('display', 'grid');

                // Close modal when clicked outside the image
                $(document).mouseup(function (e) {
                    if (!modalImg.is(e.target) && !$('.left-arrow').is(e.target) && !$('.right-arrow').is(e.target) && modalImg.has(e.target).length === 0) {
                        modal.css('display', 'none');
                    }
                });

                // Close modal when close button is clicked
                $('.close').click(function () {
                    modal.css('display', 'none');
                });

                // Scroll through images with left and right arrows, or with the on screen "left-arrow" and "right-arrow" icons
                $(document).keydown(function (e) {
                    if (e.keyCode == 37) { // Left arrow
                        scrollLeft();
                    } else if (e.keyCode == 39) { // Right arrow
                        scrollRight();
                    }
                });

                $('.left-arrow').click(scrollLeft);
                $('.right-arrow').click(scrollRight);

                function scrollLeft() {
                    currentIndex = (currentIndex === 0) ? images.length - 1 : currentIndex - 1;
                    modalImg.attr('src', $(images[currentIndex]).attr('src'));
                }

                function scrollRight() {
                    currentIndex = (currentIndex === images.length - 1) ? 0 : currentIndex + 1;
                    modalImg.attr('src', $(images[currentIndex]).attr('src'));
                }

            });

            // Close modal when escape key is pressed
            $(document).keydown(function (e) {
                if (e.keyCode == 27) { // Escape key
                    $('#myModal').css('display', 'none');
                }
            });
        });
    </script>
</body>
</html>